{ "space": "T1w",
  "name": "convert_shore_recons",
  "space": "T1w",
  "atlases": ["schaefer100x7", "schaefer100x17", "schaefer200x7", "schaefer200x17", "schaefer400x7", "schaefer400x17", "brainnetome246", "aicha384", "gordon333", "aal116", "power264"],
  "anatomical": ["mrtrix_5tt"],
  "nodes": [
    {
      "name": "csdsi_3dshore",
      "software": "Dipy",
      "action": "3dSHORE_reconstruction",
      "input": "qsiprep",
      "output_suffix": "3dSHORE",
      "parameters": {
        "extrapolate_scheme": "HCP",
        "radial_order": 8,
        "regularization": "L2",
        "lambdaN": 1e-8,
        "lambdaL": 1e-8,
        "write_mif": true,
        "write_fibgz": true
      }
    },
    {
      "name": "streamline_connectivity",
      "software": "DSI Studio",
      "action": "connectivity",
      "input": "csdsi_3dshore",
      "parameters": {
        "turning_angle": 35,
        "method": 0,
        "smoothing": 0.0,
        "step_size": 1.0,
        "min_length": 10,
        "max_length": 250,
        "seed_plan": 0,
        "interpolation": 0,
        "initial_dir": 2,
        "fiber_count": 5000000,
        "connectivity_value": "count,ncount,mean_length,gfa",
        "connectivity_type": "pass,end",
        "output_trk": "no_trk"
      }
    },
    {
        "name": "controlability",
        "input": "streamline_connectivity",
        "action": "controllability",
        "output_suffix": "rec-3dshore_control"
    },
    {
      "name": "msmt_csd",
      "software": "MRTrix3",
      "action": "csd",
      "output_suffix": "msmtcsd",
      "input":"csdsi_3dshore",
      "parameters": {
        "mtnormalize": true,
        "response": {
          "algorithm": "msmt_5tt"
        },
        "fod": {
          "algorithm": "msmt_csd",
          "max_sh": [4, 8, 8]
        }
      }
    },
    {
      "name": "track_ifod2",
      "software": "MRTrix3",
      "action": "tractography",
      "output_suffix": "ifod2",
      "input": "msmt_csd",
      "parameters": {
        "use_5tt": true,
        "use_sift2": true,
        "tckgen":{
          "algorithm": "iFOD2",
          "select": 5e6,
          "max_length": 250,
          "min_length": 30,
          "power":0.33,
          "crop_at_gmwmi": true,
          "backtrack": true
        },
        "sift2":{}
      }
    },
    {
      "name": "mrtrix_conn",
      "software": "MRTrix3",
      "action": "connectivity",
      "output_suffix": "msmtconnectome",
      "input": "track_ifod2",
      "parameters":{
        "use_sift_weights": true,
        "tck2connectome": {
          "zero_diagonal":false,
          "search_radius": 2.0,
          "scale_invnodevol":true,
          "symmetric": true
        }
      }
    }
  ]
}
